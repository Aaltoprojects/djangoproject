{% extends 'base.html' %}
{% load i18n %}
{% load crispy_forms_tags %}

{% block title %}
Lis채채 projekti
{% endblock %}

{% block content %}

<div class="container">
	<div class="row justify-content-center">
		<div class="col-8">
			<h1 class="mt-2">Lis채채 projekti</h1>
			<hr class="mt-0 mb-4">
			<form action="" id="add_project_form" method="post">
				{% csrf_token %}
				<div class="row">
					<div class="col-6">
						{{ form.project_name|as_crispy_field }}
					</div>
					<div class="col-6">
						{{ form.destination_name|as_crispy_field }}
					</div>
				</div>
				<div class="row">
					<div class="col-6">
						{{ form.start_date | as_crispy_field}}
					</div>
					<div class="col-6">
						{{ form.end_date | as_crispy_field }}
					</div>
				</div>
				<div class="row">
					<div class="col-12">
						<label>
							Rakennustyyppi
						</label>
						<select class="js-example-basic-multiple" name="structure_type" multiple="multiple" style="width: 100%">
							{% for filter in f1 %}
								<option value= "{{ filter }}" > {{ filter }} </option>
							{% endfor %}
						</select>
					</div>
				</div>
				<br>
				<div class="row">
					<div class="col-12">
						<label>
							Rakennusmateriaali
						</label>
						<select class="js-example-basic-multiple" name="building_material" multiple="multiple" style="width: 100%">
							{% for filter in f2 %}
								<option value= "{{ filter }}" > {{ filter }} </option>
							{% endfor %}
						</select>
					</div>
				</div>
				<br>
				<div class="row">
					<div class="col-12">
						<label>
							Palvelu
						</label>
						<select class="js-example-basic-multiple" name="service" multiple="multiple" style="width: 100%">
							{% for filter in f3 %}
								<option value= "{{ filter }}" > {{ filter }} </option>
							{% endfor %}
						</select>
					</div>
				</div>
				<br>
				<div class="row">
					<div class="col-12">
						<label>
							Rakennustoimenpide
						</label>
						<select class="js-example-basic-multiple" name="construction_operation" multiple="multiple" style="width: 100%">
							{% for filter in f4 %}
								<option value= "{{ filter }}" > {{ filter }} </option>
							{% endfor %}
						</select>
					</div>
				</div>
				<br>
				<div class="row">
					<div class="col-12">
						<label>
							Rakenneosa
						</label>
						<select class="js-example-basic-multiple" name="structural_component" multiple="multiple" style="width: 100%">
							{% for filter in f5 %}
								<option value= "{{ filter }}" > {{ filter }} </option>
							{% endfor %}
						</select>
					</div>
				</div>
				<div class="row">
					<div class="col-6">
						{{ form.keywords|as_crispy_field }}
					</div>
					<div class="col-6">
						{{ form.project_manager|as_crispy_field }}
					</div>
				</div>
				{{ form.project_description|as_crispy_field }}
				<div class="row">
					<div class="col-6">
						{{ form.documentation_path|as_crispy_field }}
					</div>
				</div>
				<button type="submit" class="btn btn-primary">Esikatsele</button>
			</form>
		</div>
	</div>
</div>

<script type="text/javascript">
	document.getElementById("submit_button").addEventListener("click", function(){
	  window.btn_clicked = true; 
	});

	var formChanged = false;
	var myForm = document.getElementById('add_project_form');
	myForm.addEventListener('change', () => formChanged = true);
	window.addEventListener('beforeunload', (event) => {
	  if (formChanged && !window.btn_clicked) {
		  event.preventDefault();
		  event.returnValue = '';
	  }
	});
</script>

<script>
	$(document).ready(function() {
	    $('.js-example-basic-multiple').select2();
	});
</script>

<script>
	$(".js-example-theme-multiple").select2({
		theme: "classic"
	});
</script>

{% endblock %}