{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% load bootstrap4 %}

{% block title %}
Etsi projekteja tietokannasta
{% endblock %}

{% block content %}
<div class="container">
	<div class="row justify-content-center">
		<div class="col-8">
			<h1 class="mt-2">Etsi projekti</h1>
			<hr class="mt-0 mb-4">
			<form method='get'>
				{% csrf_token %}
				<div class="row">
					<div class="col-6">
						{{ form.start_date|as_crispy_field }}
					</div>
					<div class="col-6">
						{{ form.end_date|as_crispy_field }}
					</div>
				</div>
				<div class="row">
					<div class="col-6">
						{{ form.structure_type|as_crispy_field }}
					</div>
					<div class="col-6">
						{{ form.building_material|as_crispy_field }}
					</div>
					<div class="col-6">
						{{ form.service|as_crispy_field }}
					</div>
					<div class="col-6">
						{{ form.construction_operation|as_crispy_field }}
					</div>
				</div>
				<div class="row">
					<div class="col-7">
						{{ form.key_phrase_search|as_crispy_field }}
					</div>
				</div>
				<button type="submit" class="btn btn-primary">Etsi</button>
			</form>
		</div>
	</div>
</div>
<br>
{% if result %}
<table id="project_table" class="display responsive" width='100%'>
    <thead>
        <tr>
            <th class='all'>Projektin nimi</th>
            <th class='all'>Kohteen nimi</th>
            <th class='all'>Aloituspäivä</th>
            <th class='all'>Lopetuspäivä</th>
            <th class='min-desktop'>Tyyppi</th>
            <th class='min-desktop'>Materiaali</th>
            <th class='min-desktop'>Palvelu</th>
            <th class='min-desktop'>Toimenpide</th>
            <th class='min-desktop'>Avainsanat</th>
            <th class='none'>Projektin kuvaus</th>
            <th class='none'>Polku tiedostojen sijaintiin</th>
            <th class='none'>Projektin vetäjä</th>
        </tr>
    </thead>
    <tbody>
    	{% for item in result %}
       		<tr>
            	<td>{{ item.project_name }}</td>
            	<td>{{ item.destination_name }}</td>
            	<td>{{ item.start_date }}</td>
            	<td>{{ item.end_date }}</td>
            	<td>{{ item.structure_type }}</td>
            	<td>{{ item.building_material }}</td>
            	<td>{{ item.service }}</td>
            	<td>{{ item.construction_operation }}</td>
            	<td>{{ item.keywords }}</td>
            	<td>{{ item.project_description }}</td>
            	<td>{{ item.documentation_path }}</td>
            	<td>{{ item.project_manager }}</td>
        	</tr>
        {% endfor %}
    </tbody>
</table>

<script>
$(document).ready( function () {
    $('#project_table').DataTable( {
    	searching: false
    } );
} );
</script>
{% endif %}
{% endblock %}